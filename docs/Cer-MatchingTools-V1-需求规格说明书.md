# Cer-MatchingTools-V1-需求规格说明书

## 1. 引言

### 1.1 编写目的
本文档详细描述ASR字准确率对比工具的需求规格，为系统设计、开发、测试和维护提供依据。

### 1.2 项目背景
随着自动语音识别（ASR）技术的广泛应用，需要一个专业的工具来评估ASR系统的转写准确性。本项目旨在开发一个用户友好、功能完善的中文字准确率（CER）计算工具。

### 1.3 定义和缩略语
- **ASR**: Automatic Speech Recognition，自动语音识别
- **CER**: Character Error Rate，字符错误率
- **GUI**: Graphical User Interface，图形用户界面
- **CLI**: Command Line Interface，命令行界面

### 1.4 参考资料
- GB/T 15532-2008 计算机软件测试规范
- IEEE Std 830-1998 软件需求规格说明推荐实践
- Python 3.12 官方文档

## 2. 项目概述

### 2.1 产品概述
ASR字准确率对比工具是一个基于Python的桌面应用程序，专门用于计算和分析ASR转写结果与标准文本之间的字符错误率。

### 2.2 产品功能
- 中文字符错误率精确计算
- 多种分词器支持（Jieba、THULAC、HanLP）
- 批量文件处理
- 错误详细分析
- 多种界面支持（GUI、CLI）
- 结果导出和可视化

### 2.3 用户特点
- **语音识别研究人员**：需要评估ASR系统性能
- **语音技术开发者**：需要测试和优化ASR算法
- **质量评估人员**：需要进行标准化测试
- **学术研究者**：需要进行实验数据分析

### 2.4 约束条件
- 运行环境：Python 3.12+
- 操作系统：Windows、macOS、Linux
- 内存要求：最少512MB可用内存
- 存储要求：最少100MB可用磁盘空间

## 3. 功能需求

### 3.1 核心计算功能

#### 3.1.1 字符错误率计算
**需求ID**: F001  
**优先级**: 高  
**描述**: 系统应能准确计算中文文本的字符错误率

**功能详述**:
- 基于编辑距离算法（Levenshtein）进行计算
- 支持替换、删除、插入三种错误类型的统计
- 提供字符级别的精确对比
- 计算公式：CER = (S + D + I) / N × 100%
  - S: 替换错误数
  - D: 删除错误数
  - I: 插入错误数
  - N: 参考文本字符总数

**输入条件**:
- 参考文本（标准文本）
- 假设文本（ASR转写结果）
- 可选的分词器类型
- 可选的语气词过滤设置

**输出结果**:
- 总体字符错误率
- 各类错误的详细统计
- 错误位置信息
- 对比结果高亮显示

#### 3.1.2 文本预处理
**需求ID**: F002  
**优先级**: 高  
**描述**: 系统应提供完善的中文文本预处理功能

**功能详述**:
- 自动检测和转换文本编码（UTF-8、GBK、GB2312等）
- 全角/半角字符标准化
- 数字格式统一处理
- 标点符号规范化
- 空格和换行符处理

#### 3.1.3 语气词过滤
**需求ID**: F003  
**优先级**: 中  
**描述**: 系统应支持中文语气词的智能过滤

**功能详述**:
- 支持20种常见中文语气词的识别和过滤
- 包括但不限于："嗯"、"啊"、"呢"、"哦"、"额"等
- 基于词性标注识别语气词
- 用户可选择启用或禁用此功能
- 在结果中标明是否使用了语气词过滤

### 3.2 分词器功能

#### 3.2.1 多分词器支持
**需求ID**: F004  
**优先级**: 高  
**描述**: 系统应支持多种中文分词器的插拔式切换

**支持的分词器**:
- **Jieba分词器**（默认）：轻量级，兼容性好
- **THULAC分词器**：学术级精度，需要额外安装
- **HanLP分词器**：深度学习技术，功能全面

**功能详述**:
- 自动检测可用的分词器
- 运行时动态切换分词器
- 分词器状态和版本信息显示
- 分词器不可用时的优雅降级

#### 3.2.2 分词器管理
**需求ID**: F005  
**优先级**: 中  
**描述**: 系统应提供分词器的生命周期管理

**功能详述**:
- 延迟加载分词器模型
- 单例模式避免重复初始化
- 分词器配置管理
- 错误恢复和重试机制

### 3.3 用户界面功能

#### 3.3.1 图形用户界面
**需求ID**: F006  
**优先级**: 高  
**描述**: 系统应提供直观易用的图形界面

**界面布局**:
- 窗口大小：800×650像素，支持调整大小
- 分层布局：分词器选择 + 文件管理 + 控制 + 结果展示
- 左右对称的文件选择区域
- 实时状态显示

**交互功能**:
- 文件拖拽导入
- 批量文件选择
- 文件对应关系管理
- 进度条显示
- 结果表格展示
- 错误高亮显示

#### 3.3.2 命令行界面
**需求ID**: F007  
**优先级**: 中  
**描述**: 系统应提供完整的命令行界面支持

**命令参数**:
```bash
python main.py --ref <参考文件> --hyp <假设文件> [选项]
```

**支持选项**:
- `--tokenizer`: 指定分词器类型
- `--filter-fillers`: 启用语气词过滤
- `--details`: 显示详细错误分析
- `--output`: 指定输出文件
- `--format`: 指定输出格式（txt/csv）

### 3.4 文件处理功能

#### 3.4.1 文件导入
**需求ID**: F008  
**优先级**: 高  
**描述**: 系统应支持多种文件格式的导入

**支持格式**:
- 纯文本文件（.txt）
- 支持多种编码：UTF-8、GBK、GB2312、GB18030、ANSI

**功能详述**:
- 自动编码检测
- 批量文件导入
- 文件有效性验证
- 错误文件提示

#### 3.4.2 批量处理
**需求ID**: F009  
**优先级**: 高  
**描述**: 系统应支持大量文件的批量处理

**功能详述**:
- 支持一对一文件配对
- 拖拽排序建立对应关系
- 批量计算进度显示
- 处理结果汇总

#### 3.4.3 结果导出
**需求ID**: F010  
**优先级**: 中  
**描述**: 系统应支持多种格式的结果导出

**支持格式**:
- 纯文本报告（.txt）
- CSV数据表格（.csv）
- 详细分析报告

**导出内容**:
- 文件名和路径信息
- 字符错误率统计
- 错误详细分析
- 分词器和参数信息
- 处理时间戳

### 3.5 错误分析功能

#### 3.5.1 详细错误统计
**需求ID**: F011  
**优先级**: 高  
**描述**: 系统应提供详细的错误分析功能

**统计内容**:
- 替换错误（Substitution）的数量和位置
- 删除错误（Deletion）的数量和位置
- 插入错误（Insertion）的数量和位置
- 错误字符的具体内容

#### 3.5.2 错误可视化
**需求ID**: F012  
**优先级**: 中  
**描述**: 系统应提供错误的可视化展示

**可视化功能**:
- 错误高亮显示
- 颜色编码区分错误类型
- 对齐显示参考文本和假设文本
- 错误位置标记

## 4. 非功能需求

### 4.1 性能需求

#### 4.1.1 响应时间
**需求ID**: NF001  
**优先级**: 高  
**描述**: 系统响应时间要求

**具体要求**:
- 单文件处理（<1000字符）：< 1秒
- 单文件处理（1000-10000字符）：< 5秒
- 批量处理启动时间：< 3秒
- GUI界面响应时间：< 0.5秒

#### 4.1.2 吞吐量
**需求ID**: NF002  
**优先级**: 中  
**描述**: 系统处理能力要求

**具体要求**:
- 支持同时处理100个文件对
- 单个文件最大支持100,000字符
- 内存占用不超过512MB（正常使用）
- CPU占用率不超过80%（批量处理时）

### 4.2 可靠性需求

#### 4.2.1 稳定性
**需求ID**: NF003  
**优先级**: 高  
**描述**: 系统稳定性要求

**具体要求**:
- 连续运行24小时无崩溃
- 异常情况下的优雅降级
- 自动错误恢复机制
- 数据完整性保证

#### 4.2.2 容错性
**需求ID**: NF004  
**优先级**: 高  
**描述**: 系统容错能力要求

**具体要求**:
- 文件读取失败时的错误提示
- 分词器不可用时的备选方案
- 内存不足时的优雅处理
- 非法输入的安全处理

### 4.3 可用性需求

#### 4.3.1 易用性
**需求ID**: NF005  
**优先级**: 高  
**描述**: 系统易用性要求

**具体要求**:
- 直观的用户界面设计
- 清晰的操作流程指引
- 友好的错误信息提示
- 完整的帮助文档

#### 4.3.2 学习成本
**需求ID**: NF006  
**优先级**: 中  
**描述**: 用户学习成本要求

**具体要求**:
- 新用户5分钟内掌握基本操作
- 高级功能30分钟内学会使用
- 提供示例文件和操作指南
- 支持工具提示和帮助信息

### 4.4 兼容性需求

#### 4.4.1 平台兼容性
**需求ID**: NF007  
**优先级**: 高  
**描述**: 操作系统兼容性要求

**支持平台**:
- Windows 10/11
- macOS 10.15+
- Ubuntu 18.04+
- 其他主流Linux发行版

#### 4.4.2 Python版本兼容性
**需求ID**: NF008  
**优先级**: 高  
**描述**: Python版本兼容性要求

**支持版本**:
- Python 3.12（推荐）
- Python 3.11（兼容）
- Python 3.10（有限支持）

### 4.5 安全需求

#### 4.5.1 数据安全
**需求ID**: NF009  
**优先级**: 中  
**描述**: 用户数据安全要求

**具体要求**:
- 本地数据处理，不上传到云端
- 临时文件的安全清理
- 敏感信息的保护
- 文件访问权限控制

#### 4.5.2 输入验证
**需求ID**: NF010  
**优先级**: 中  
**描述**: 输入数据验证要求

**具体要求**:
- 文件类型和大小限制
- 恶意输入的防护
- 编码格式验证
- 路径遍历攻击防护

### 4.6 可维护性需求

#### 4.6.1 代码质量
**需求ID**: NF011  
**优先级**: 中  
**描述**: 代码质量要求

**具体要求**:
- 遵循PEP 8编码规范
- 代码注释覆盖率 > 60%
- 模块化设计，低耦合高内聚
- 完整的API文档

#### 4.6.2 可扩展性
**需求ID**: NF012  
**优先级**: 中  
**描述**: 系统可扩展性要求

**具体要求**:
- 支持新分词器的插件式集成
- 支持新算法的扩展
- 支持新文件格式的扩展
- 配置化的参数管理

## 5. 接口需求

### 5.1 用户接口
- 图形用户界面（GUI）
- 命令行界面（CLI）
- 配置文件接口

### 5.2 软件接口
- Python标准库
- 第三方分词库（jieba、thulac、hanlp）
- 文件系统接口
- 操作系统接口

### 5.3 硬件接口
- 标准输入输出设备
- 文件存储设备
- 内存系统

### 5.4 通信接口
- 本地文件读写
- 进程间通信（可选）

## 6. 约束条件

### 6.1 设计约束
- 使用Python 3.12开发
- 使用Tkinter作为GUI框架
- 遵循开源软件许可证
- 支持中文Unicode字符集

### 6.2 实现约束
- 单进程架构（当前版本）
- 基于内存的数据处理
- 本地文件存储
- 无网络依赖（除模型下载）

### 6.3 运行环境约束
- 最低硬件要求：2GB RAM，1GB存储空间
- 最低系统要求：64位操作系统
- Python运行环境要求：Python 3.10+

## 7. 质量属性

### 7.1 可靠性
- 系统无故障运行时间 > 99%
- 数据处理准确率 > 99.9%
- 异常恢复时间 < 5秒

### 7.2 性能
- 响应时间 < 1秒（普通操作）
- 吞吐量 > 1000字符/秒
- 资源占用 < 512MB内存

### 7.3 可用性
- 操作成功率 > 95%
- 错误信息理解率 > 90%
- 帮助文档完整性 > 95%

### 7.4 可维护性
- 代码修改影响范围 < 20%
- 新功能集成时间 < 1天
- 缺陷修复时间 < 2小时

## 8. 验收标准

### 8.1 功能验收
- 所有核心功能正常运行
- 计算结果精度符合要求
- 用户界面操作流畅
- 错误处理机制有效

### 8.2 性能验收
- 响应时间满足需求
- 资源占用在合理范围
- 并发处理能力达标
- 稳定性测试通过

### 8.3 兼容性验收
- 各平台正常运行
- Python版本兼容性确认
- 分词器集成测试通过
- 文件格式支持完整

### 8.4 文档验收
- 用户手册完整准确
- API文档详细清晰
- 安装指南易于理解
- 示例代码可运行

## 9. 风险分析

### 9.1 技术风险
- **分词器依赖**：第三方分词器可能不可用
  - 缓解措施：多分词器支持，优雅降级
- **性能瓶颈**：大文件处理可能出现性能问题
  - 缓解措施：分块处理，进度显示
- **编码问题**：多种文件编码可能导致乱码
  - 缓解措施：自动编码检测，手动编码选择

### 9.2 需求风险
- **需求变更**：用户需求可能发生变化
  - 缓解措施：模块化设计，预留扩展接口
- **用户期望**：用户期望可能超出系统能力
  - 缓解措施：明确功能边界，用户教育

### 9.3 项目风险
- **时间限制**：开发时间可能不足
  - 缓解措施：优先级管理，分阶段交付
- **资源限制**：开发资源可能有限
  - 缓解措施：重用现有代码，简化设计

## 10. 术语表

| 术语 | 定义 |
|-----|------|
| ASR | 自动语音识别技术 |
| CER | 字符错误率，衡量转写准确性的指标 |
| 编辑距离 | 两个字符串之间的最小编辑操作数 |
| 分词器 | 将连续文本分割成词汇单元的工具 |
| 语气词 | 表达语气和情感的辅助词语 |
| GUI | 图形用户界面 |
| CLI | 命令行界面 |

---

**文档版本**：V1.0  
**创建日期**：2024年7月  
**最后修改**：2024年7月  
**审核人员**：开发团队  
**批准人员**：项目负责人 