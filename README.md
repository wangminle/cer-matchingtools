# ASR字准确率对比工具

这是一个用于批量对比ASR（自动语音识别）转写结果与标准文本之间字准确率的Python工具。

## 功能特性

- 批量导入ASR转写结果文档和标准标注文档
- 通过拖拽方式建立ASR结果和标注文件的一一对应关系
- 自动计算字准确率（Character Accuracy Rate）
- 统计文档字数信息
- 支持导出统计结果为TXT或CSV格式

## 安装依赖

使用pip安装依赖：

```bash
pip install -r requirements.txt
```

## 使用方法

本工具提供三种不同的使用方式：

### 1. GUI界面方式（推荐）

```bash
python src/main.py
```

使用步骤：
1. 在界面左侧点击"选择ASR文件"按钮，批量导入ASR转写结果文件
2. 在界面右侧点击"选择标注文件"按钮，批量导入标准标注文件
3. 如有需要，通过拖拽调整文件顺序建立对应关系
4. 点击"开始统计"按钮，计算字准确率
5. 查看结果表格，包含文件名、字数和准确率信息
6. 点击"导出结果"按钮，将结果保存为TXT或CSV文件

### 2. 示例测试方式

运行内置示例，查看字准确率计算功能：

```bash
python example_test.py
```

这会展示：
- 中文文本的字准确率计算示例
- 英文文本的字准确率计算示例
- 从文件读取文本并计算字准确率的示例

### 3. 命令行工具方式

直接比较两个指定的文件：

```bash
python check_accuracy.py --ref 参考文件路径 --asr ASR结果文件路径
```

例如：
```bash
python check_accuracy.py --ref ref_text1.txt --asr asr_result1.txt
```

命令行工具会显示详细的评估结果，包括字准确率、错误率、替换/删除/插入错误数等指标。

## 字准确率计算方法

工具使用的是字符错误率（CER）的补集，计算公式为：

```
字准确率 = 1 - CER = 1 - (S + D + I) / N
```

其中：
- S：替换错误数
- D：删除错误数
- I：插入错误数
- N：标准文本中的字符总数

计算过程中先对文本进行预处理，包括去除标点符号、转换为小写、去除多余空格等。

## 项目结构

- `src/main.py`：主程序，包含GUI界面和主要功能
- `src/utils.py`：工具类，包含字准确率计算相关函数
- `example_test.py`：示例测试脚本
- `check_accuracy.py`：命令行比较工具
- `requirements.txt`：项目依赖列表

## 注意事项

- 支持的文件格式：纯文本文件(.txt)
- 文件编码：UTF-8
- 字准确率计算是基于字符级别的，特别适合中文等没有明确词边界的语言 